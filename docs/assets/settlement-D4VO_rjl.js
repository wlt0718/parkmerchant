import{_ as J,u as K,r as c,a as I,k as Q,o as p,e as v,c as i,w as r,h as t,n as X,C as Y,f as a,t as u,F as k,q as O,s as Z,p as $,j as ee}from"./index-BHGkRF-4.js";import{C as te}from"./index-Cz7WhZgA.js";import{C as oe,a as se,D as ne}from"./index-C_S36A4t.js";import"./playlist-b5zg-1U_.js";import{S as ae}from"./index-DMyWtmmY.js";import{s as ie}from"./function-call-CwOe3ly0.js";import{B as le}from"./mount-component-BuZT6hKE.js";import{C as ce}from"./index-BoSBZ65j.js";import{P as ue}from"./index-_OJURkF2.js";import"./index-DEBgaFZc.js";import"./use-route-D-FLbocK.js";import"./on-popup-reopen-DmirtVs0.js";import"./use-placeholder-Dahg5kQc.js";const w=_=>($("data-v-1c5f016c"),_=_(),ee(),_),de={class:"store"},re={key:0,class:"store-item"},me={class:"item-left"},pe={class:"name"},ve={class:"red"},_e={class:"right"},he=w(()=>t("div",{style:{color:"#E6A23C"}},"未结算",-1)),fe={class:"btn"},ge=w(()=>t("div",{class:"footer-box"},null,-1)),ke={class:"footer"},we={class:"footer-left"},xe={class:"summary"},Ce={class:"wei"},be={class:"red"},Ne={class:"amt"},Ve={class:"red"},ye={class:"footer-btn"},De={class:"content"},Se={class:"head"},je={class:"red"},Ee={class:"red"},Ie=w(()=>t("div",{class:"tipsa"},"结算明细如下：",-1)),Oe={class:"list"},Ue=w(()=>t("div",{class:"list-item title"},[t("div",{class:"name"},"导游"),t("div",{class:"value"},"结算金额")],-1)),Ae={class:"name"},Be={class:"value"},Fe={class:"foot-btn"},Le={__name:"settlement",setup(_){const U=K(),N=c("1"),V=c("date"),A=[{text:"所有导游",value:"1"},{text:"导游一",value:"2"},{text:"导游二",value:"3"},{text:"导游三",value:"4"}],B=c([{text:"今日",value:"date"},{text:"本周",value:"week"},{text:"本月",value:"month"},{text:"自定义时间",value:"custom"}]),F=n=>{n==="custom"&&(h.value=!0)},h=c(!1),L=c("");function M(n){h.value=!1;const e=n[0].getMonth()+1+"月"+n[0].getDate()+"日",o=n[1].getMonth()+1+"月"+n[1].getDate()+"日";L.value=e+"-"+o}const d=c([{id:0,guideName:"王天真",num:20,amount:40,proportion:5,income:30,time:"2024年04月29日",status:0,pici:"100120240430001"},{id:1,guideName:"赵童童",num:20,amount:33,proportion:5,income:30,time:"2024年04月29日",status:0,pici:"100220240430001"},{id:2,guideName:"赵童童",num:20,amount:105,proportion:5,income:30,time:"2024年04月29日",status:0,pici:"100220240430002"},{id:3,guideName:"崔一",num:20,amount:19,proportion:5,income:30,time:"2024年04月29日",status:0,pici:"100320240430001"},{id:4,guideName:"王天真",num:20,amount:25,proportion:5,income:30,time:"2024年04月29日",status:0,pici:"100120240430002"},{id:5,guideName:"王天真",num:20,amount:10,proportion:5,income:30,time:"2024年04月29日",status:0,pici:"100120240430003"},{id:6,guideName:"崔一",num:20,amount:30,proportion:5,income:30,time:"2024年04月29日",status:0,pici:"100320240430002"}]);function P(){U.push({name:"info"})}const l=c([]),x=c(!1),C=c(!1);function R(n){const e=d.value.map(o=>o.id);l.value=n?e:[],C.value=!1}function G(n){const e=n.length;x.value=e===d.value.length&&e>0,C.value=e>0&&e<d.value.length}const y=I(()=>{const n=l.value.map(o=>d.value.find(m=>m.id===o).guideName),e=[];return n.forEach(o=>{e.indexOf(o)===-1&&e.push(o)}),e.length}),D=I(()=>{if(l.value.length===0)return"";const n=l.value.map(o=>d.value.find(m=>m.id===o));let e=0;return n.forEach(o=>{e=e+o.amount}),e}),f=c(!1),S=Q({weiObj:{}});function q(){if(!l.value.length)return ie({title:"提示",message:"您还没有选择结算列表"}),!1;const n=l.value.map(o=>d.value.find(m=>m.id===o));let e={};n.forEach(o=>{e.hasOwnProperty(o.guideName)?e[o.guideName]=e[o.guideName]+o.amount:e[o.guideName]=0+o.amount}),S.weiObj=e,f.value=!0}function z(){l.value.forEach(n=>{const e=d.value.findIndex(o=>o.id===n);d.value.splice(e,1)}),f.value=!1,l.value=[]}return(n,e)=>{const o=se,g=ne,m=ae,T=oe,j=te,b=le,W=ce,H=ue;return p(),v(k,null,[i(m,null,{default:r(()=>[i(g,null,{default:r(()=>[i(o,{modelValue:N.value,"onUpdate:modelValue":e[0]||(e[0]=s=>N.value=s),options:A},null,8,["modelValue"]),i(o,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=s=>V.value=s),options:B.value,onChange:F},null,8,["modelValue","options"])]),_:1})]),_:1}),i(T,{show:h.value,"onUpdate:show":e[2]||(e[2]=s=>h.value=s),type:"range",onConfirm:M,"allow-same-day":"",position:"top"},null,8,["show"]),t("div",de,[i(W,{modelValue:l.value,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value=s),onChange:G},{default:r(()=>[(p(!0),v(k,null,O(d.value,s=>(p(),v(k,{key:s.id},[s.status===0?(p(),v("div",re,[i(j,{name:s.id,class:"checkbox"},null,8,["name"]),t("div",me,[t("div",pe,"导游："+u(s.guideName),1),t("div",null,"带客游玩批次："+u(s.pici),1),t("div",null,"时间："+u(s.time),1),t("div",null,[a("结算金额："),t("span",ve,"￥"+u(s.amount),1)])]),t("div",_e,[he,t("div",fe,[i(b,{color:"#5075FF",size:"mini",round:"",onClick:P,block:""},{default:r(()=>[a("查看详情")]),_:1})])])])):Z("",!0)],64))),128))]),_:1},8,["modelValue"])]),ge,t("div",ke,[t("div",we,[i(j,{class:"checkall",modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=s=>x.value=s),indeterminate:C.value,onChange:R},{default:r(()=>[a("全选 ")]),_:1},8,["modelValue","indeterminate"]),X(t("div",xe,[t("div",Ce,[a("已选：导游 "),t("span",be,u(y.value),1),a(" 位")]),t("div",Ne,[a("共计："),t("span",Ve,u(D.value),1),a("元")])],512),[[Y,l.value.length>0]])]),t("div",ye,[i(b,{color:"#5075ff",onClick:q,round:"",block:""},{default:r(()=>[a("立即结算")]),_:1})])]),i(H,{show:f.value,"onUpdate:show":e[5]||(e[5]=s=>f.value=s),closeable:"",position:"bottom",class:"popup",round:""},{default:r(()=>[t("div",De,[t("div",Se,[t("div",null,[a("结算导游总计： "),t("span",je,u(y.value),1),a(" 位")]),t("div",null,[a("结算金额总计： "),t("span",Ee,u(D.value),1),a(" 元")]),Ie]),t("div",Oe,[Ue,(p(!0),v(k,null,O(S.weiObj,(s,E)=>(p(),v("div",{key:E,class:"list-item"},[t("div",Ae,u(E),1),t("div",Be,u(s)+" 元",1)]))),128))])]),t("div",Fe,[i(b,{color:"#5075ff",onClick:z,round:"",block:""},{default:r(()=>[a("确认结算")]),_:1})])]),_:1},8,["show"])],64)}}},Ye=J(Le,[["__scopeId","data-v-1c5f016c"]]);export{Ye as default};
