import{d as $,r as C,k as q,a as E,c as u,_ as z,u as X,o as T,e as N,h as o,F as R,q as G,w,x as J,t as j,f as K,n as x,v as V,p as Q,j as Y}from"./index-BRYTmIyP.js";import{C as Z}from"./index-D2xUohRP.js";import"./playlist-CfDtktyq.js";import{B as ee}from"./index-KzW-Uw1Q.js";import{c as te,m as oe,n as A,b as H,d as se,f as ne,h as ae,j as le,w as ie}from"./index-4pUri2OV.js";import{u as ce,P as re}from"./index-Caave46l.js";import{u as de}from"./use-expose-N8why80i.js";import{p as ue,c as fe}from"./on-popup-reopen-ebgq6Xfv.js";import"./use-route-DOGmHK4u.js";import"./constant-Co2M3aoe.js";const[me,B]=te("swipe-cell"),pe={name:oe(""),disabled:Boolean,leftWidth:A,rightWidth:A,beforeClose:Function,stopPropagation:Boolean};var he=$({name:me,props:pe,emits:["open","close","click"],setup(n,{emit:p,slots:f}){let c,h,v,a;const _=C(),i=C(),s=C(),l=q({offset:0,dragging:!1}),m=ce(),y=t=>t.value?ae(t).width:0,b=E(()=>H(n.leftWidth)?+n.leftWidth:y(i)),e=E(()=>H(n.rightWidth)?+n.rightWidth:y(s)),k=t=>{l.offset=t==="left"?b.value:-e.value,c||(c=!0,p("open",{name:n.name,position:t}))},P=t=>{l.offset=0,c&&(c=!1,p("close",{name:n.name,position:t}))},F=t=>{const r=Math.abs(l.offset),d=.15,O=c?1-d:d,I=t==="left"?b.value:e.value;I&&r>I*O?k(t):P(t)},L=t=>{n.disabled||(v=l.offset,m.start(t))},M=t=>{if(n.disabled)return;const{deltaX:r}=m;m.move(t),m.isHorizontal()&&(h=!0,l.dragging=!0,(!c||r.value*v<0)&&ue(t,n.stopPropagation),l.offset=le(r.value+v,-e.value,b.value))},S=()=>{l.dragging&&(l.dragging=!1,F(l.offset>0?"left":"right"),setTimeout(()=>{h=!1},0))},W=(t="outside")=>{a||(p("click",t),c&&!h&&(a=!0,fe(n.beforeClose,{args:[{name:n.name,position:t}],done:()=>{a=!1,P(t)},canceled:()=>a=!1,error:()=>a=!1})))},U=(t,r)=>d=>{r&&d.stopPropagation(),W(t)},D=(t,r)=>{const d=f[t];if(d)return u("div",{ref:r,class:B(t),onClick:U(t,!0)},[d()])};return de({open:k,close:P}),se(_,()=>W("outside"),{eventName:"touchstart"}),ne("touchmove",M,{target:_}),()=>{var t;const r={transform:`translate3d(${l.offset}px, 0, 0)`,transitionDuration:l.dragging?"0s":".6s"};return u("div",{ref:_,class:B(),onClick:U("cell",h),onTouchstartPassive:L,onTouchend:S,onTouchcancel:S},[u("div",{class:B("wrapper"),style:r},[D("left",i),(t=f.default)==null?void 0:t.call(f),D("right",s)])])}}});const ve=ie(he),g=n=>(Q("data-v-3715a457"),n=n(),Y(),n),ge={class:"page"},_e={class:"project-list"},be={class:"pitem"},ke=g(()=>o("img",{src:"",alt:"",class:"item-left"},null,-1)),Ce={class:"item-right"},ye={class:"footer"},we=g(()=>o("div",{class:"popuptitle"},"修改项目",-1)),je={class:"from-item"},xe=g(()=>o("label",{for:"name",class:"from-label"}," 项目名称 ",-1)),Ve={class:"from-item"},Pe=g(()=>o("label",{for:"amounts",class:"from-label"}," 项目费用 ",-1)),Te={class:"from-item"},Be=g(()=>o("label",{for:"bl",class:"from-label"}," 佣金比例 ",-1)),Ee={class:"from-item"},Se=g(()=>o("label",{for:"yj",class:"from-label"}," 佣金 ",-1)),We={__name:"project",setup(n){const p=X(),f=C([{id:"001",name:"游艇",amount:40,bili:10,yongjin:4,isCheck:!1},{id:"002",name:"摩天轮",amount:100,bili:10,yongjin:10,isCheck:!1},{id:"003",name:"海盗船",amount:60,bili:5,yongjin:3,isCheck:!1},{id:"004",name:"激情冲浪",amount:80,bili:10,yongjin:8,isCheck:!1},{id:"005",name:"激情冲浪",amount:80,bili:10,yongjin:8,isCheck:!1}]),c=E({get(){return f.value.every(i=>i.isCheck)},set(i){f.value.forEach(s=>{s.isCheck=i})}});function h(){p.push({name:"addProject"})}const v=C(!1),a=q({name:"",amounts:"",bili:null,yongjin:null});function _(i){p.push({name:"addProject"})}return(i,s)=>{const l=Z,m=ee,y=ve,b=re;return T(),N(R,null,[o("div",ge,[o("div",_e,[(T(!0),N(R,null,G(f.value,e=>(T(),J(y,{class:"project-item",key:e.id},{right:w(()=>[u(m,{square:"",text:"修改",type:"warning",class:"delete-button",onClick:k=>_(e)},null,8,["onClick"]),u(m,{square:"",text:"删除",type:"danger",class:"delete-button"})]),default:w(()=>[o("div",be,[u(l,{modelValue:e.isCheck,"onUpdate:modelValue":k=>e.isCheck=k,name:e.id,class:"checkbox"},null,8,["modelValue","onUpdate:modelValue","name"]),ke,o("div",Ce,[o("div",null,"项目名称："+j(e.name),1),o("div",null,"项目费用："+j(e.amount)+" 元",1),o("div",null,"佣金比例："+j(e.bili)+" %",1),o("div",null,"佣金："+j(e.yongjin)+" 元",1)])])]),_:2},1024))),128))])]),o("div",ye,[u(l,{class:"checkall",modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e)},{default:w(()=>[K("全选 ")]),_:1},8,["modelValue"]),o("div",{class:"del",onClick:s[1]||(s[1]=(...e)=>i.delExamine&&i.delExamine(...e))},"批量删除"),o("button",{type:"button",class:"btn",onClick:h},"新增项目")]),u(b,{show:v.value,"onUpdate:show":s[7]||(s[7]=e=>v.value=e),position:"center",round:"",closeable:"",class:"popup"},{default:w(()=>[we,o("div",je,[xe,x(o("input",{id:"name",class:"from-input",type:"text","onUpdate:modelValue":s[2]||(s[2]=e=>a.name=e)},null,512),[[V,a.name]])]),o("div",Ve,[Pe,x(o("input",{id:"amounts",class:"from-input",type:"text","onUpdate:modelValue":s[3]||(s[3]=e=>a.amounts=e)},null,512),[[V,a.amounts]])]),o("div",Te,[Be,x(o("input",{id:"bl",class:"from-input",type:"text","onUpdate:modelValue":s[4]||(s[4]=e=>a.bili=e)},null,512),[[V,a.bili]])]),o("div",Ee,[Se,x(o("input",{id:"yj",class:"from-input",type:"text","onUpdate:modelValue":s[5]||(s[5]=e=>a.佣金=e)},null,512),[[V,a.佣金]])]),o("button",{type:"button",class:"btn",onClick:s[6]||(s[6]=(...e)=>i.confirmAdd&&i.confirmAdd(...e))},"确认修改")]),_:1},8,["show"])],64)}}},Me=z(We,[["__scopeId","data-v-3715a457"]]);export{Me as default};
