import{d as $,r as k,n as O,a as D,C as N,c as f,_ as U,u as z,o as j,f as q,j as n,w as x,F as A,A as G,D as X,t as E,q as J,h as H,p as K,l as Q}from"./index-CjJM-_zo.js";import{C as Y}from"./index-Ba3h3CKI.js";import{u as Z}from"./project-6LQLmV_a.js";import{B as ee}from"./mount-component-DHlKC6En.js";import{C as te}from"./index-O0C4X7-U.js";import{c as oe,m as se,n as M,b as ae,d as ne,e as le,p as ce,f as ie,w as re}from"./index-DXagRkgH.js";import{u as ue,a as de}from"./index-ClfTCOY7.js";import{c as fe}from"./on-popup-reopen-DVyMNl9U.js";import{a as he}from"./function-call-BIYs2Lyr.js";import"./use-route-CBP6vgWG.js";import"./index-BzK9mV0u.js";import"./use-placeholder-DJzMM5mT.js";const[me,T]=oe("swipe-cell"),pe={name:se(""),disabled:Boolean,leftWidth:M,rightWidth:M,beforeClose:Function,stopPropagation:Boolean};var ve=$({name:me,props:pe,emits:["open","close","click"],setup(o,{emit:v,slots:c}){let u,g,i,d;const p=k(),w=k(),y=k(),l=O({offset:0,dragging:!1}),_=ue(),s=e=>e.value?le(e).width:0,t=D(()=>N(o.leftWidth)?+o.leftWidth:s(w)),h=D(()=>N(o.rightWidth)?+o.rightWidth:s(y)),C=e=>{l.offset=e==="left"?t.value:-h.value,u||(u=!0,v("open",{name:o.name,position:e}))},b=e=>{l.offset=0,u&&(u=!1,v("close",{name:o.name,position:e}))},P=e=>{const r=Math.abs(l.offset),m=.15,L=u?1-m:m,R=e==="left"?t.value:h.value;R&&r>R*L?C(e):b(e)},a=e=>{o.disabled||(i=l.offset,_.start(e))},S=e=>{if(o.disabled)return;const{deltaX:r}=_;_.move(e),_.isHorizontal()&&(g=!0,l.dragging=!0,(!u||r.value*i<0)&&ce(e,o.stopPropagation),l.offset=ie(r.value+i,-h.value,t.value))},B=()=>{l.dragging&&(l.dragging=!1,P(l.offset>0?"left":"right"),setTimeout(()=>{g=!1},0))},V=(e="outside")=>{d||(v("click",e),u&&!g&&(d=!0,fe(o.beforeClose,{args:[{name:o.name,position:e}],done:()=>{d=!1,b(e)},canceled:()=>d=!1,error:()=>d=!1})))},W=(e,r)=>m=>{r&&m.stopPropagation(),V(e)},I=(e,r)=>{const m=c[e];if(m)return f("div",{ref:r,class:T(e),onClick:W(e,!0)},[m()])};return de({open:C,close:b}),ae(p,()=>V("outside"),{eventName:"touchstart"}),ne("touchmove",S,{target:p}),()=>{var e;const r={transform:`translate3d(${l.offset}px, 0, 0)`,transitionDuration:l.dragging?"0s":".6s"};return f("div",{ref:p,class:T(),onClick:W("cell",g),onTouchstartPassive:a,onTouchend:B,onTouchcancel:B},[f("div",{class:T("wrapper"),style:r},[I("left",w),(e=c.default)==null?void 0:e.call(c),I("right",y)])])}}});const ge=re(ve),F=o=>(K("data-v-a1cb0781"),o=o(),Q(),o),_e={class:"page"},Ce={class:"project-list"},ke={class:"pitem"},be=F(()=>n("img",{src:"",alt:"",class:"item-left"},null,-1)),xe={class:"item-right"},we=F(()=>n("div",{class:"footer-box"},null,-1)),ye={class:"footer"},Ee={class:"footer-left"},Pe={class:"footer-btn"},Se={__name:"project",setup(o){const v=z(),c=Z();function u(){v.push({path:"/addProject",query:{type:"0"}})}function g(s){v.push({path:"/addProject",query:{type:"1",id:s.id}})}const i=k([]),d=k(!1),p=k(!1);function w(s){const t=c.list.map(h=>h.id);i.value=s?t:[],p.value=!1}function y(s){const t=s.length;d.value=t===c.list.length,p.value=t>0&&t<c.list.length}function l(s){c.SET_list_del(s)}function _(){if(i.value.length){let s="";i.value.forEach(t=>{s=s+t.name+"、"}),he({title:"提示",confirmButtonColor:"#5075ff",message:"确认删除您选择的项目？"}).then(()=>{i.value.forEach(t=>{c.SET_list_del(t)})}).catch(()=>{})}}return(s,t)=>{const h=Y,C=ee,b=ge,P=te;return j(),q(A,null,[n("div",_e,[n("div",Ce,[f(P,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),onChange:y},{default:x(()=>[(j(!0),q(A,null,G(J(c).list,a=>(j(),X(b,{class:"project-item",key:a.id},{right:x(()=>[f(C,{square:"",text:"修改",type:"warning",class:"delete-button",onClick:S=>g(a)},null,8,["onClick"]),f(C,{square:"",text:"删除",type:"danger",class:"delete-button",onClick:S=>l(a.id)},null,8,["onClick"])]),default:x(()=>[n("div",ke,[f(h,{name:a.id,class:"checkbox"},null,8,["name"]),be,n("div",xe,[n("div",null,"项目名称："+E(a.name),1),n("div",null,"项目费用："+E(a.amount)+" 元",1),n("div",null,"佣金比例："+E(a.bili)+" %",1),n("div",null,"佣金："+E(a.yongjin)+" 元",1)])])]),_:2},1024))),128))]),_:1},8,["modelValue"])])]),we,n("div",ye,[n("div",Ee,[f(h,{class:"checkall",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=a=>d.value=a),indeterminate:p.value,onChange:w},{default:x(()=>[H("全选 ")]),_:1},8,["modelValue","indeterminate"]),n("div",{class:"del",onClick:_},"批量删除")]),n("div",Pe,[f(C,{color:"#5075ff",onClick:u,round:"",block:""},{default:x(()=>[H("新增项目")]),_:1})])])],64)}}},Me=U(Se,[["__scopeId","data-v-a1cb0781"]]);export{Me as default};
