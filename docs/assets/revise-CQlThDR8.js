import{_ as I,u as P,k as C,r as d,o as r,e as a,h as s,n as c,v as p,t as h,p as V,j as E}from"./index-BRYTmIyP.js";import{u as T}from"./user-_Q2Xo4xD.js";import{s as l}from"./function-call-CZcdVXZ-.js";import"./mount-component-DO70U7a7.js";import"./index-4pUri2OV.js";import"./use-expose-N8why80i.js";import"./index-Caave46l.js";import"./constant-Co2M3aoe.js";import"./on-popup-reopen-ebgq6Xfv.js";import"./index-KzW-Uw1Q.js";import"./use-route-DOGmHK4u.js";import"./use-placeholder-js-WKF-8.js";import"./use-height-C0VXp5Jy.js";const i=n=>(V("data-v-b7987bc9"),n=n(),E(),n),U={class:"login"},B=i(()=>s("div",{class:"title"},"修改密码",-1)),D={key:0,class:"from"},M={class:"from-item"},R=i(()=>s("label",{for:"mobile",class:"from-label"},"手机号",-1)),$={class:"from-item"},j=i(()=>s("label",{for:"smsCode",class:"from-label"},"验证码",-1)),N={class:"sms"},q={key:1},z={key:1,class:"from"},A={class:"from-item"},F=i(()=>s("label",{for:"password",class:"from-label"},"密码",-1)),G={class:"from-item"},H=i(()=>s("label",{for:"confirmPassword",class:"from-label"},"确认密码",-1)),J={__name:"revise",setup(n){const _=T(),y=P(),o=C({usertype:"1",mobile:"",password:"",confirmPassrowd:"",smscode:""}),v=d("1"),b=d("获取验证码"),u=d(!1),f=d(60);let w=null;function S(){u.value=!0,w=setInterval(()=>{f.value-=1,f.value<=0&&(b.value="重新发送",u.value=!0,clearInterval(w))},1e3)}function k(){const{mobile:m,password:e,confirmPassrowd:t,smscode:g}=o;if(!new RegExp(/^[0-9]{11}$/).test(m))return l({title:"提示",message:"请输入正确的手机号"}),!1;if(m!==_.mobile)return l({title:"提示",message:"该手机号未注册"}),!1;if(!new RegExp(/^\d{6}$/).test(g))return l({title:"提示",message:"验证码格式不正确"}),!1;v.value="2"}function x(){const{mobile:m,password:e,confirmPassrowd:t,smscode:g}=o;if(!e)return l({title:"提示",message:"请输入密码"}),!1;if(e!==t)return l({title:"提示",message:"两次密码不一样"}),!1;_.SET_password(o.password),l({message:"修改密码成功，去登录"}).then(()=>{y.replace({name:"login"})})}return(m,e)=>(r(),a("div",U,[B,v.value==="1"?(r(),a("div",D,[s("div",M,[R,c(s("input",{id:"mobile",class:"from-input",type:"tel",max:"11",placeholder:"请输入手机号","onUpdate:modelValue":e[0]||(e[0]=t=>o.mobile=t)},null,512),[[p,o.mobile]])]),s("div",$,[j,c(s("input",{id:"smsCode",class:"from-input",type:"tel",max:"6",placeholder:"请输入手机验证码","onUpdate:modelValue":e[1]||(e[1]=t=>o.smscode=t)},null,512),[[p,o.smscode]]),s("div",N,[u.value?(r(),a("span",q,h(f.value)+"秒",1)):(r(),a("span",{key:0,onClick:S},h(b.value),1))])]),s("button",{type:"button",class:"btn",onClick:k},"下一步")])):(r(),a("div",z,[s("div",A,[F,c(s("input",{id:"password",class:"from-input",type:"password",placeholder:"长度8到16位 仅限字母数字","onUpdate:modelValue":e[2]||(e[2]=t=>o.password=t)},null,512),[[p,o.password]])]),s("div",G,[H,c(s("input",{id:"confirmPassword",class:"from-input",type:"password",placeholder:"请再次确认密码","onUpdate:modelValue":e[3]||(e[3]=t=>o.confirmPassrowd=t)},null,512),[[p,o.confirmPassrowd]])]),s("button",{type:"button",class:"btn",onClick:x},"修改")]))]))}},is=I(J,[["__scopeId","data-v-b7987bc9"]]);export{is as default};
